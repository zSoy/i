<!DOCTYPE html>
<html>
<head>
<title>临时测试</title>
<script src="https://sql.js.org/dist/sql-wasm.js"></script>
  <style type="text/css">
    #content{
      display:flex;
    }
    p.sentence:hover{
      color:red;
    }
  </style>
</head>
<body>


<div id="content">
  <div id="artc"></div>
  <div id="saying"></div>
</div>
<script>
window.onkeydown = ()=>false;
let artc_innerHTML = "";
let sentence_innerHTML = "";
const artc_content = s => `<div><p>${s.artc_title}</p><div>${s.artc_content}</div></div>`;
const sentence_content = s => `<div><p class="sentence" title="${s.sentence_meaning}">${s.sentence_content}</p></div>`
window.onload = async ()=>{
  const sqlPromise = initSqlJs({locateFile: file => `https://sql.js.org/dist/${file}`});
  const dataPromise = fetch("/i/sql.db").then(res => res.arrayBuffer());
  const [SQL, buf] = await Promise.all([sqlPromise, dataPromise]);
  const db = new SQL.Database(new Uint8Array(buf));
  const stmt1 = db.prepare("select * from tb_blog_artc");
  while(stmt1.step()) {
    const row = stmt1.getAsObject();
    console.log(row);
    artc_innerHTML += artc_content(row);
  }
  const stmt2 = db.prepare("select * from tb_blog_sentence")
  while(stmt2.step()){
    const row = stmt2.getAsObject();
    sentence_innerHTML += sentence_content(row);
  }
  document.querySelector('#artc').innerHTML = artc_innerHTML;
  document.querySelector('#saying').innerHTML = sentence_innerHTML;
}

</script>
</body>
</html>
